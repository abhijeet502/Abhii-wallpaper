<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Bablu Art Studio ‚Äî Professional</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#071022; --muted:rgba(255,255,255,0.86); --accent:#153a6b; --glass: rgba(255,255,255,0.03);
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:linear-gradient(180deg,#05060a,#071022);font-family:Inter,system-ui,Roboto,Arial;color:#fff}
  a{color:inherit}
  /* header */
  header{position:fixed;left:0;right:0;top:0;height:72px;display:flex;align-items:center;justify-content:space-between;padding:12px 20px;z-index:120;backdrop-filter: blur(6px)}
  .brand{display:flex;align-items:center;gap:12px}
  .header-logo{width:48px;height:48px;border-radius:10px;background:#fff;overflow:hidden;display:flex;align-items:center;justify-content:center}
  .header-logo img{width:90%;height:90%;object-fit:contain}
  nav{display:flex;gap:12px;align-items:center}
  nav a{font-weight:700;color:var(--muted);padding:6px 10px;border-radius:8px}
  nav a.cta{background:var(--accent);color:#fff}
  main{padding-top:96px;max-width:1200px;margin:0 auto;opacity:0;transform:translateY(12px);transition:opacity 700ms ease, transform 700ms ease;pointer-events:none}
  body.intro-done main{opacity:1;transform:none;pointer-events:auto}

  /* hero area */
  .hero-wrap{position:relative;min-height:72vh;display:flex;align-items:center;justify-content:center;padding:36px 20px;overflow:visible}
  .hero-card{width:100%;max-width:1100px;border-radius:16px;overflow:hidden;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.06));box-shadow:0 18px 60px rgba(0,0,0,0.7);min-height:56vh;position:relative;display:flex}
  canvas#heroCanvas{width:100%;height:100%;display:block;}

/* Intro centered big logo */
  #introLogo{
    position:absolute; z-index:160; width:340px; height:340px; border-radius:50%; display:flex; align-items:center; justify-content:center; pointer-events:none;
    transition: transform 900ms cubic-bezier(.22,.9,.3,1), width 900ms, height 900ms, top 900ms, left 900ms, opacity 600ms;
    will-change:transform, width, height, opacity;
  }
  #introLogo img{width:88%;height:88%;object-fit:contain;display:block}

/* Shrink + move to header + fade */
  body.intro-done #introLogo{
    width:48px; height:48px; opacity:0.98;
    transform: translate(calc(-50vw + 86px), calc(-38vh + 14px)) scale(1);
  }
  @media(max-width:720px){
    #introLogo{width:260px;height:260px}
    body.intro-done #introLogo{ transform: translate(calc(-50vw + 76px), calc(-42vh + 10px)); width:40px;height:40px }
  }

/* controls */
.controls{position:absolute;left:14px;top:14px;display:flex;gap:10px;z-index:80}
.btn{background:var(--glass);padding:8px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);color:var(--muted);cursor:pointer;font-weight:800}
.btn.active{background:linear-gradient(90deg,var(--accent),#2a6fb0);color:#fff;border:none}

/* sections */
.container{padding:28px 20px}
.kicker{font-weight:800;color:var(--muted);letter-spacing:0.06em}
.title{font-size:clamp(24px,4.5vw,38px);font-weight:900;margin:8px 0}
.subtitle{color:var(--muted);max-width:56ch}

/* grid */
.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
@media(max-width:980px){ .grid{grid-template-columns:repeat(2,1fr)} }
@media(max-width:600px){ .grid{grid-template-columns:1fr} }

/* product card */
.card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.06));padding:16px;border-radius:12px;display:flex;gap:12px;align-items:center}
.thumb{width:88px;height:88px;border-radius:10px;overflow:hidden;background:#111;display:flex;align-items:center;justify-content:center}
.card h3{margin:0;font-size:16px}
.price{margin-left:auto;font-weight:900;color:var(--accent)}

/* footer */
footer{padding:28px 20px;border-top:1px solid rgba(255,255,255,0.03);display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap;color:var(--muted);max-width:1200px;margin:0 auto}

/* modal */
.modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.6);z-index:220;visibility:hidden;opacity:0;transition:all .12s}
.modal.open{visibility:visible;opacity:1}
.modal-card{background:linear-gradient(180deg,#071022,#04101a);padding:18px;border-radius:12px;min-width:320px;max-width:520px;color:#fff}
input,textarea{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:#fff;margin-top:8px}

/* notice */
.notice{position:fixed;left:50%;transform:translateX(-50%);bottom:22px;background:#27ae60;padding:10px 14px;border-radius:10px;color:#02120a;display:none;z-index:240}
</style>
</head>
<body>

<header>
  <div class="brand">
    <div class="header-logo">
      <img id="headerLogo" src="assets/logo.png" alt="Bablu Art Studio">
    </div>
    <div>
      <div style="font-weight:800">Bablu Art Studio</div>
      <div style="font-size:13px;color:var(--muted)">Laser Cutting ‚Ä¢ Signboards ‚Ä¢ Since 1965</div>
    </div>
  </div>

  <nav>
    <a href="#products">Products</a>
    <a href="https://instagram.com/bablu_art_studio" target="_blank" rel="noreferrer">Instagram</a>
    <a class="cta" id="orderNow">Order Now</a>
  </nav>
</header>

<!-- Big centered logo intro + hero canvas -->
<section class="hero-wrap">
  <div class="hero-card" aria-hidden="false">
    <canvas id="heroCanvas"></canvas>

    <div class="controls">
      <button id="btnLogoMask" class="btn active">Logo Mask</button>
      <button id="btnBlobMask" class="btn">Liquid Mask</button>
      <button id="toggleWebcam" class="btn">Webcam</button>
      <button id="captureShot" class="btn">Capture</button>
    </div>

    <div style="position:absolute;right:18px;bottom:18px;z-index:80;background:rgba(0,0,0,0.45);padding:10px;border-radius:10px">
      <div style="font-weight:800">Bablu Art Studio</div>
      <div style="font-size:13px;color:var(--muted)">Call / WhatsApp: <strong>8507608757</strong></div>
    </div>
  </div>

  <!-- centered logo visible on load, will shrink + fade into header -->
  <div id="introLogo" aria-hidden="true">
    <img id="introLogoImg" src="assets/logo.png" alt="Bablu Art Studio logo">
  </div>
</section>

<!-- ORGANIZED CONTENT (hidden until intro done) -->
<main>
  <section class="container" id="products">
    <div>
      <div class="kicker">Our Work</div>
      <h2 class="title">Eye-catching Signboards & Precision Laser Cutting</h2>
      <p class="subtitle">Professional fabrication and installation. Call or WhatsApp to discuss custom sizes and materials. Below are sample services ‚Äî replace images & prices with real items.</p>
    </div>

    <div style="height:18px"></div>

    <div class="grid">
      <div class="card">
        <div class="thumb"><img id="p1" src="assets/hero.jpg" style="width:100%;height:100%;object-fit:cover"></div>
        <div>
          <h3>Radium Signboard</h3>
          <div style="font-size:13px;color:var(--muted)">Custom illuminated signboards ‚Äî acrylic & metal.</div>
        </div>
        <div class="price">‚Çπ1,299</div>
      </div>

      <div class="card">
        <div class="thumb"><img id="p2" src="assets/hero.jpg" style="width:100%;height:100%;object-fit:cover"></div>
        <div>
          <h3>Laser-cut Logo</h3>
          <div style="font-size:13px;color:var(--muted)">Precision logo cutting for shop fronts & decor.</div>
        </div>
        <div class="price">‚Çπ899</div>
      </div>

      <div class="card">
        <div class="thumb"><img id="p3" src="assets/hero.jpg" style="width:100%;height:100%;object-fit:cover"></div>
        <div>
          <h3>Custom Boards</h3>
          <div style="font-size:13px;color:var(--muted)">Vinyl, acrylic, metal ‚Äî tailored to your need.</div>
        </div>
        <div class="price">‚Çπ499</div>
      </div>
    </div>
  </section>

  <section style="padding:28px 20px">
    <h3 style="margin:0 0 8px 0">Contact</h3>
    <div style="display:flex;gap:20px;flex-wrap:wrap">
      <div style="min-width:220px">
        <div style="font-weight:800">Bablu Art Studio</div>
        <div style="font-size:13px;color:var(--muted)">üìç Market Road, YourTown (replace with real address)</div>
        <div style="font-size:13px;color:var(--muted)">üìû 8507608757</div>
        <div style="font-size:13px;color:var(--muted)">üì∑ <a href="https://instagram.com/bablu_art_studio" target="_blank">@bablu_art_studio</a></div>
      </div>
      <div style="min-width:220px">
        <div style="font-weight:800">Business Hours</div>
        <div style="font-size:13px;color:var(--muted)">Mon‚ÄìSat: 09:30 ‚Äì 19:30</div>
        <div style="font-size:13px;color:var(--muted)">Sun: Closed</div>
      </div>
    </div>
  </section>
</main>

<footer>
  <div>
    <div style="font-weight:900">Bablu Art Studio</div>
    <div style="font-size:13px;color:var(--muted)">Market Road, YourTown</div>
    <div style="font-size:13px;color:var(--muted)">8507608757 ‚Ä¢ <a href="https://instagram.com/bablu_art_studio" target="_blank">@bablu_art_studio</a></div>
  </div>
  <div style="font-size:13px;color:var(--muted)">Prepared for client delivery ‚Äî replace images & copy before publishing.</div>
</footer>

<!-- Order modal -->
<div id="orderModal" class="modal" aria-hidden="true">
  <div class="modal-card">
    <h3 style="margin:0 0 6px 0">Place an Order</h3>
    <div style="font-size:13px;color:var(--muted)">Orders saved locally and can be posted to a webhook if configured.</div>
    <input id="customerName" placeholder="Full name">
    <input id="customerPhone" placeholder="Phone / WhatsApp">
    <textarea id="orderNote" placeholder="Order details"></textarea>
    <div style="height:8px"></div>
    <div style="display:flex;gap:8px;justify-content:flex-end">
      <button class="btn" id="closeModal">Cancel</button>
      <button class="btn active" id="sendOrder">Send</button>
    </div>
  </div>
</div>

<div id="notice" class="notice">Order saved</div>

<!-- Three.js + shader + intro sequence -->
<script type="module">
import * as THREE from 'https://unpkg.com/three@0.156.0/build/three.module.js';

/* SETTINGS - replace these assets with your images */
const LOGO_SRC = 'assets/logo.png'; // circular logo (transparent PNG preferred)
const HERO_SRC = 'assets/hero.jpg'; // product / hero image

/* THREE setup */
const canvas = document.getElementById('heroCanvas');
const renderer = new THREE.WebGLRenderer({ canvas, antialias:true, alpha:true });
renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

function resizeRenderer(){
  const w = canvas.clientWidth || 1000;
  const h = canvas.clientHeight || 520;
  renderer.setSize(w,h);
}
resizeRenderer();

const scene = new THREE.Scene();
const camera = new THREE.OrthographicCamera(-1,1,1,-1,0,1);
const geometry = new THREE.PlaneGeometry(2,2);

/* Textures */
const loader = new THREE.TextureLoader();
const productTex = loader.load(HERO_SRC, t=> { t.minFilter = THREE.LinearFilter; t.magFilter = THREE.LinearFilter; resizeRenderer();});
const bgTex = loader.load(HERO_SRC, t=> { t.minFilter = THREE.LinearFilter; t.magFilter = THREE.LinearFilter; });

let video = document.createElement('video');
let videoTexture = new THREE.VideoTexture(video);
videoTexture.minFilter = THREE.LinearFilter; videoTexture.magFilter = THREE.LinearFilter;

/* Helper: image -> canvas texture (for logo mask) */
async function imgToMaskTexture(url, size=1024){
  return new Promise((resolve) => {
    const img = new Image();
    img.crossOrigin = 'anonymous';
    img.onload = () => {
      const c = document.createElement('canvas'); c.width = size; c.height = size;
      const ctx = c.getContext('2d'); ctx.clearRect(0,0,size,size);
      const ratio = Math.min(size / img.width, size / img.height);
      const w = img.width * ratio; const h = img.height * ratio;
      ctx.drawImage(img, (size - w)/2, (size - h)/2, w, h);
      const tex = new THREE.CanvasTexture(c);
      tex.minFilter = THREE.LinearFilter; tex.magFilter = THREE.LinearFilter;
      resolve(tex);
    };
    img.onerror = ()=> resolve(null);
    img.src = url;
  });
}

/* Shaders */
const vertex = `#version 300 es
in vec3 position; out vec2 vUv;
void main(){ vUv = position.xy*0.5 + 0.5; gl_Position = vec4(position,1.0); }`;

const fragment = `#version 300 es
precision highp float;
in vec2 vUv; out vec4 outColor;
uniform sampler2D uMain, uBg, uVideo, uLogoMask;
uniform vec2 uRes; uniform float uTime; uniform float uScale; uniform float uSpeed;
uniform int uUseLogoMask; uniform int uMode;
float hash21(vec2 p){ return fract(sin(dot(p,vec2(127.1,311.7)))*43758.5453123); }
float noise(vec2 p){ vec2 i=floor(p); vec2 f=fract(p); float a=hash21(i), b=hash21(i+vec2(1.,0.)), c=hash21(i+vec2(0.,1.)), d=hash21(i+vec2(1.,1.)); vec2 u=f*f*(3.-2.*f); return mix(a,b,u.x) + (c-a)*u.y*(1.-u.x) + (d-b)*u.x*u.y; }
float fbm(vec2 p){ float v=0.; float a=0.5; for(int i=0;i<5;i++){ v+= a*noise(p); p*=1.9; a*=0.5;} return v; }
void main(){
  vec2 uv = vUv; vec2 c = uv - 0.5; c.x *= uRes.x / uRes.y; vec2 p = c * uScale; float t = uTime * uSpeed;
  float w = fbm(p + vec2(t*0.12, -t*0.08)); float w2 = fbm(p*1.4 + vec2(-t*0.09, t*0.11));
  float proc = smoothstep(0.18,0.64, w*0.9 + w2*0.45); float r = length(c); proc *= smoothstep(0.9, 0.08, r*1.1);
  float pulse = 0.45 + 0.25 * sin(uTime * 1.3 + r*6.0); float finalProc = smoothstep(pulse-0.12, pulse+0.12, proc);
  float logoA = texture(uLogoMask, uv).a;
  float mask = (uUseLogoMask==1) ? logoA * finalProc : finalProc;
  vec3 mainCol = texture(uMain, uv).rgb; vec3 bgCol = texture(uBg, uv).rgb; vec3 vidCol = texture(uVideo, uv).rgb;
  vec3 color;
  if(uMode==2) color = mix(bgCol, vidCol, mask);
  else { if(uMode==1) color = mix(mainCol, bgCol, mask); else color = mix(bgCol, mainCol, mask); }
  float edge = length(vec2(dFdx(mask), dFdy(mask)));
  color += vec3(1.0,0.6,0.2) * pow(edge, 0.7) * 0.16;
  outColor = vec4(color,1.0);
}`;

const material = new THREE.ShaderMaterial({
  vertexShader: vertex, fragmentShader: fragment,
  uniforms: {
    uMain: { value: productTex }, uBg: { value: bgTex }, uVideo: { value: videoTexture }, uLogoMask: { value: null },
    uRes: { value: new THREE.Vector2(window.innerWidth, window.innerHeight) }, uTime: { value: 0 },
    uScale: { value: 2.6 }, uSpeed: { value: 0.95 }, uUseLogoMask: { value: 1 }, uMode: { value: 0 }
  }
});
const mesh = new THREE.Mesh(geometry, material);
scene.add(mesh);

/* create logo mask texture */
(async ()=>{
  const maskTex = await imgToMaskTexture(LOGO_SRC, 1024);
  if(maskTex) material.uniforms.uLogoMask.value = maskTex;
  else material.uniforms.uUseLogoMask.value = 0;
})();

/* resize + animate */
function onResize(){ const w = canvas.clientWidth || 1000; const h = canvas.clientHeight || 520; renderer.setSize(w,h); material.uniforms.uRes.value.set(w,h); }
window.addEventListener('resize', onResize, { passive:true }); onResize();

let start = performance.now();
function loop(){ requestAnimationFrame(loop); const t = (performance.now() - start) * 0.001; material.uniforms.uTime.value = t;
  if(material.uniforms.uVideo.value && material.uniforms.uVideo.value.isVideoTexture) material.uniforms.uVideo.value.needsUpdate = true;
  renderer.render(scene, camera);
}
loop();

/* INTRO SEQUENCE:
   - show centered big logo (introLogo)
   - let shader run inside logo while visible ~1400ms
   - then shrink/move logo to header and fade it
   - finally set body.intro-done to reveal the organized content
*/
const introLogo = document.getElementById('introLogo');
const introImg = document.getElementById('introLogoImg');
const headerLogoImg = document.getElementById('headerLogo');

introImg.src = LOGO_SRC;
headerLogoImg.src = LOGO_SRC;

// play intro with precise timing (no user input needed)
async function playIntro(){
  // 1) initial pause so user sees the large logo
  await new Promise(r => setTimeout(r, 700)); // visible as big logo
  // 2) keep showing liquid reveal inside logo for clarity
  await new Promise(r => setTimeout(r, 1000)); // let shader run inside logo
  // 3) shrink+move logo to header (CSS handles transform)
  document.body.classList.add('intro-done');
  // 4) fade out the intro overlay after the move completes
  setTimeout(()=> { introLogo.style.opacity = '0'; introLogo.style.pointerEvents = 'none'; }, 900);
  // 5) allow content interactions after a little extra time
  setTimeout(()=> { document.body.classList.add('ready'); }, 1200);
}
playIntro();

/* UI controls */
const btnLogoMask = document.getElementById('btnLogoMask');
const btnBlobMask = document.getElementById('btnBlobMask');
const toggleWebcamBtn = document.getElementById('toggleWebcam');
const captureBtn = document.getElementById('captureShot');

btnLogoMask.onclick = ()=> { material.uniforms.uUseLogoMask.value = 1; btnLogoMask.classList.add('active'); btnBlobMask.classList.remove('active'); };
btnBlobMask.onclick = ()=> { material.uniforms.uUseLogoMask.value = 0; btnBlobMask.classList.add('active'); btnLogoMask.classList.remove('active'); };

let webcamOn = false;
toggleWebcamBtn.onclick = async ()=>{
  if(!webcamOn){
    try {
      const s = await navigator.mediaDevices.getUserMedia({ video:{ facingMode:'user', width:{ ideal:1280 }, height:{ ideal:720 } }, audio:false });
      video.srcObject = s; await video.play();
      videoTexture = new THREE.VideoTexture(video);
      videoTexture.minFilter = THREE.LinearFilter; videoTexture.magFilter = THREE.LinearFilter;
      material.uniforms.uVideo.value = videoTexture; material.uniforms.uMode.value = 2;
      webcamOn = true; toggleWebcamBtn.classList.add('active');
    } catch(e){ alert('Camera access denied. Use HTTPS or localhost and allow permission.'); console.error(e); }
  } else {
    if(video.srcObject) video.srcObject.getTracks().forEach(t=>t.stop());
    webcamOn = false; material.uniforms.uMode.value = 0; toggleWebcamBtn.classList.remove('active');
  }
};

captureBtn.onclick = ()=>{
  renderer.render(scene, camera);
  const data = renderer.domElement.toDataURL('image/png');
  const a = document.createElement('a'); a.href = data; a.download = 'bablu-hero.png'; a.click();
};

/* Order modal & saving */
document.getElementById('orderNow').onclick = ()=> { document.getElementById('orderModal').classList.add('open'); document.getElementById('orderModal').setAttribute('aria-hidden','false'); };
document.getElementById('closeModal')?.addEventListener('click', ()=> { document.getElementById('orderModal').classList.remove('open'); document.getElementById('orderModal').setAttribute('aria-hidden','true'); });
document.getElementById('sendOrder').onclick = ()=> {
  const name = document.getElementById('customerName').value.trim();
  const phone = document.getElementById('customerPhone').value.trim();
  const note = document.getElementById('orderNote').value.trim();
  if(!name || !phone || !note){ alert('Fill name, phone & order details'); return; }
  const order = { id:'ORD'+Date.now(), name, phone, note, createdAt: new Date().toISOString() };
  const arr = JSON.parse(localStorage.getItem('bablu_orders') || '[]'); arr.unshift(order); localStorage.setItem('bablu_orders', JSON.stringify(arr));
  document.getElementById('orderModal').classList.remove('open'); document.getElementById('notice').style.display='block';
  setTimeout(()=> document.getElementById('notice').style.display='none', 2800);
  document.getElementById('customerName').value=''; document.getElementById('customerPhone').value=''; document.getElementById('orderNote').value='';
};

/* set initial images (replace these assets with your uploaded images) */
document.getElementById('p1').src = HERO_SRC;
document.getElementById('p2').src = HERO_SRC;
document.getElementById('p3').src = HERO_SRC;

</script>
</body>
</html>
